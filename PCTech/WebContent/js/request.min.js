var request=function(t){"use strict";function e(){this.baseUrl="",this.lotListSubUrl="getParkingLots",this.lotInfoSubUrl="getParkingLotData?requestDataType=parkingLotInfo&parkingLotID=",this.spotLayoutSubUrl="getSpotsInfoFile?parkingLotID=",this.spotInfoSubUrl="getParkingLotData?requestDataType=parkingSpotInfo&parkingLotID=",this.spotPositions=[],this.lastLotID=null,this.spotsInfo=[]}return e.prototype={getLotList:function(){var e=this;return t.getJSON(e.baseUrl+e.lotListSubUrl).done(function(e){var o=[];e.forEach(function(t){o.push('<tr><td><a class="blockpic" href="#lotinfotable"'),o.push(' data-id="'+t[0]+'">'),o.push(t[1]),o.push("</a></td></tr>")}),t("#lotlisttable").html(o.join(""))}).fail(function(){console.log("getLotList error ")})},getLotInfo:function(e){var o=this;return o.lastLotID=e,t.getJSON(o.baseUrl+o.lotInfoSubUrl+e).done(function(e){t("#lot-name").html(e.name),t("#lot-architecture").html(e.architecture),t("#lot-businessHours").html(e.businessHours),t("#lot-client").html(e.client),t("#lot-facility").html(e.facility),t("#lot-quantity").html(e.spotQuantity),t("#lot-remain").html(e.remain),t("#lot-fee").html(e.fee),t("#lot-address").html(e.address)}).fail(function(){console.log("getParkinglot error")})},getSpotsLayout:function(e){var o=this;return t.get(o.baseUrl+o.spotLayoutSubUrl+e).done(function(t){o.spotPositions=JSON.parse(t)}).fail(function(){console.log("getLayout error")})},getSpotsInfo:function(e){var o=this;return t.getJSON(o.baseUrl+o.spotInfoSubUrl+e).done(function(n){o.spotsInfo=n,t("#lot-img").attr("src","img/"+e+".png").removeAttr("style").removeAttr("data-src")}).fail(function(){console.log("getParkingSpots error")})},setCars:function(){t("#lot-map").children().remove(".overlay-img");var e=this;e.spotsInfo.forEach(function(o){var n=e.spotPositions.filter(function(t){return t.id===o.id})[0],s=[];s.push('<img class="overlay-img '),s.push("orient-"+n.orientation),s.push('" style="top:'+n.y1+"px;left:"+n.x1+"px;width:"+n.width+"px;height:"+n.height+'px;" src="img/car.png" alt="" />'),t("#lot-map").append(s.join(""))})}},new e}(jQuery);