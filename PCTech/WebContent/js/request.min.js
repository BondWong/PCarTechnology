var request=function(t){"use strict";function o(){this.baseUrl="",this.lotListSubUrl="getParkingLots",this.lotInfoSubUrl="getParkingLotData?requestDataType=parkingLotInfo&parkingLotID=",this.spotLayoutSubUrl="getSpotsInfoFile?parkingLotID=",this.spotInfoSubUrl="getParkingLotData?requestDataType=parkingSpotInfo&parkingLotID=",this.spotPositions=[],this.lastLotID=null,this.spotsInfo=[]}return o.prototype={getLotList:function(){var o=this;return t.getJSON(o.baseUrl+o.lotListSubUrl).done(function(o){var e=[];o.forEach(function(t){e.push('<tr><td><a class="blockpic" href="#lotinfotable"'),e.push(' data-id="'+t[0]+'">'),e.push(t[1]),e.push("</a></td></tr>")}),t("#lotlisttable").html(e.join(""))}).fail(function(){console.log("getLotList error ")})},getLotInfo:function(o){var e=this;return e.lastLotID=o,t.getJSON(e.baseUrl+e.lotInfoSubUrl+o).done(function(o){t("#lot-name").html(o.name),t("#lot-architecture").html(o.architecture),t("#lot-businessHours").html(o.businessHours),t("#lot-client").html(o.client),t("#lot-facility").html(o.facility),t("#lot-quantity").html(o.spotQuantity),t("#lot-remain").html(o.remain),t("#lot-fee").html(o.fee),t("#lot-address").html(o.address)}).fail(function(){console.log("getParkinglot error")})},getSpotsLayout:function(o){var e=this;return t.get(e.baseUrl+e.spotLayoutSubUrl+o).done(function(t){e.spotPositions=JSON.parse(t)}).fail(function(){console.log("getLayout error")})},getSpotsInfo:function(o){var e=this;return t.getJSON(e.baseUrl+e.spotInfoSubUrl+o).done(function(n){e.spotsInfo=n,t("#lot-img").attr("src","img/"+o+".png").removeAttr("style").removeAttr("data-src")}).fail(function(){console.log("getParkingSpots error")})},setCars:function(){t("#lot-map").children().remove(".overlay-img");var o=this;o.spotsInfo.forEach(function(e){var n=o.spotPositions.filter(function(t){return t.id===e.id})[0],i=[];i.push('<img class="overlay-img '),i.push("orient-"+n.orientation),i.push('" style="top:'+n.y1+"px;left:"+n.x1+"px;width:"+n.width+"px;height:"+n.height+'px;" src="img/car'),("up"===n.orientation||"down"===n.orientation)&&i.push("-up"),i.push('.png" alt="" />'),t("#lot-map").append(i.join(""))})}},new o}(jQuery);