!function(e){"use strict";function n(t){var o=t.target.dataset.id;return console.log(o),e(".lotcontent").css("display","inherit"),o===request.lastLotID?void console.log(t.target):(e.when(request.getLotInfo(o),request.getSpotsLayout(o),request.getSpotsInfo(o)).done(function(){request.setCars()}),void r(o))}function r(t){clearInterval(a),a=setInterval(function(){e.when(request.getLotInfo(t),request.getSpotsInfo(t)).done(function(){request.setCars()}),e(".barble-box").css("display","inherit"),setTimeout(function(){e(".barble-box").css("display","none")},1500)},3e4)}function l(){s(),i()}function s(){o=new BMap.Map("allmap",{vectorMapLevel:99,enableHighResolution:!0}),t=new BMap.MapTypeControl({type:BMAP_MAPTYPE_CONTROL_HORIZONTAL,mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]}),o.addControl(t),o.enableScrollWheelZoom(),o.enableContinuousZoom(),o.enableKeyboard(),o.setMapStyle({styleJson:[{featureType:"water",elementType:"all",stylers:{color:"#a5c7f2",saturation:10}},{featureType:"green",elementType:"all",stylers:{saturation:20}}]});var n="天安门",a="百度大厦";o.centerAndZoom(new BMap.Point(116.404,39.915),11);var r=[BMAP_DRIVING_POLICY_LEAST_TIME,BMAP_DRIVING_POLICY_LEAST_DISTANCE,BMAP_DRIVING_POLICY_AVOID_HIGHWAYS];e("#result").click(function(){function s(t,n,a){var r=new BMap.DrivingRoute(o,{renderOptions:{map:o,panel:"r-result",autoViewport:!0},policy:a,onSearchComplete:function(e){if(r.getStatus()==BMAP_STATUS_SUCCESS){var t=e.getPlan(0);l="全程：",l+=t.getDistance(!0),l+=" / ",l+=t.getDuration(!0)}},onPolylinesSet:function(){e("#time-distance span").html(l)}});r.search(t,n)}o.clearOverlays();var t=e("#driving_way select").val();s(n,a,r[t]);var l})}function i(){e("#linechart").highcharts({title:{text:"实时车流量统计",x:-20},subtitle:{text:"Source: parking.com",x:-20},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yAxis:{title:{text:"Temperature (°C)"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"°C"},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"},series:[{name:"Tokyo",data:[7,6.9,9.5,14.5,18.2,21.5,25.2,26.5,23.3,18.3,13.9,9.6]},{name:"New York",data:[-.2,.8,5.7,11.3,17,22,24.8,24.1,20.1,14.1,8.6,2.5]},{name:"Berlin",data:[-.9,.6,3.5,8.4,13.5,17,18.6,17.9,14.3,9,3.9,1]},{name:"London",data:[3.9,4.2,5.7,8.5,11.9,15.2,17,16.6,14.2,10.3,6.6,4.8]}]})}var t,o;e(document).ready(function(){l(),request.baseUrl="assets/",request.lotListSubUrl="lotlist",request.lotInfoSubUrl="lotinfo-",request.spotLayoutSubUrl="layout-",request.spotInfoSubUrl="spots-",request.getLotList().then(function(){e(".blockpic").click(n)}),e("#lot-map").dragScroll({}),e("#rtbtn").change(function(){console.log("show rt"),e("#realtimelot").show(),e("#analysis").hide()}),e("#alybtn").change(function(){console.log("show aly"),e("#realtimelot").hide(),e("#analysis").show(),e(window).resize()})});var a}(jQuery);